// -*- mode: js-jsx -*-
/* Bazecor
 * Copyright (C) 2022  Dygmalab, Inc.
 *
 * This program is free software: you can redistribute it and/or modify it under
 * the terms of the GNU General Public License as published by the Free Software
 * Foundation, version 3.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */

import React from "react";

import colorMatrixCalc from "../../renderer/utils/colorMatrixCalculation";

const Neuron = ({ visibility, onClick, fill, stroke, strokeWidth, dataLedIndex, dataKeyIndex, dataLayer }) => {
  const [color, setColor] = React.useState("rgb(255,255,255)");
  const [colorMatrix, setColorMatrix] = React.useState(colorMatrixCalc("rgb(255,255,255)", 0.65));

  React.useEffect(() => {
    setColor(fill);
    setColorMatrix(colorMatrixCalc(fill, 0.65));
  }, [fill]);

  if (!visibility) return null;
  return (
    <g id="neuronWrapper" className={`${stroke === "#fff" ? "keyOnFocus" : "keyOnHold"} `}>
      <g className="neuronOutline">
        <path
          xmlns="http://www.w3.org/2000/svg"
          fillRule="evenodd"
          clipRule="evenodd"
          d="M572.219 675.754C571.171 678.269 568.236 679.527 565.721 678.374C565.616 678.374 565.616 678.269 565.511 678.269L514.678 654.163C507.132 650.6 503.883 641.586 507.447 633.935L538.261 567.695C541.195 561.407 542.663 554.594 542.663 547.677V515.186C542.663 509.107 547.589 504.181 553.668 504.181H611.732C617.811 504.181 622.737 509.107 622.737 515.186V547.677C622.737 554.594 624.204 561.407 627.139 567.695L657.953 633.935C661.517 641.481 658.268 650.495 650.721 654.163L599.889 678.269C597.373 679.422 594.439 678.374 593.286 675.859C593.286 675.754 593.181 675.754 593.181 675.649C590.77 669.884 584.167 667.159 578.403 669.57C575.468 670.828 573.372 673.029 572.219 675.754Z"
          strokeWidth="3"
          strokeMiterlimit="1.5"
          strokeLinecap="round"
          strokeLinejoin="round"
          fill="transparent"
          className="NeuronLine"
        />
      </g>
      <g
        className="neuronLights"
        onClick={onClick}
        data-led-index={dataLedIndex}
        data-key-index={dataKeyIndex}
        data-layer={dataLayer}
      >
        {/* <g xmlns="http://www.w3.org/2000/svg" filter="url(#filterPathNeuron001)"> */}
        <g xmlns="http://www.w3.org/2000/svg" filter="url(#filterPathNeuron001)">
          <path
            d="M599.722 566.834H598.788C598.166 566.834 597.543 566.834 596.92 566.834C593.029 566.987 589.292 567.751 585.712 568.821L597.543 573.101L600.345 574.171L602.836 575.088L598.633 593.124C596.92 601.073 593.963 608.715 590.071 615.593L597.699 607.034L600.345 604.13L600.656 603.824L604.704 599.391C605.326 598.78 605.793 598.016 605.949 597.098L607.35 592.513L614.355 569.738C609.841 567.904 604.859 566.987 599.722 566.834Z"
            fill={color}
          />
          <path
            d="M597.9 572.167L597.891 572.164L597.883 572.161L589.04 568.962C591.606 568.352 594.239 567.942 596.94 567.834H596.942H596.946H596.949H596.953H596.957H596.96H596.964H596.968H596.971H596.975H596.979H596.982H596.986H596.99H596.993H596.997H597H597.004H597.008H597.011H597.015H597.019H597.022H597.026H597.03H597.033H597.037H597.041H597.044H597.048H597.052H597.055H597.059H597.062H597.066H597.07H597.073H597.077H597.081H597.084H597.088H597.092H597.095H597.099H597.103H597.106H597.11H597.114H597.117H597.121H597.124H597.128H597.132H597.135H597.139H597.143H597.146H597.15H597.154H597.157H597.161H597.165H597.168H597.172H597.176H597.179H597.183H597.187H597.19H597.194H597.197H597.201H597.205H597.208H597.212H597.216H597.219H597.223H597.227H597.23H597.234H597.238H597.241H597.245H597.249H597.252H597.256H597.259H597.263H597.267H597.27H597.274H597.278H597.281H597.285H597.289H597.292H597.296H597.3H597.303H597.307H597.311H597.314H597.318H597.322H597.325H597.329H597.332H597.336H597.34H597.343H597.347H597.351H597.354H597.358H597.362H597.365H597.369H597.373H597.376H597.38H597.384H597.387H597.391H597.394H597.398H597.402H597.405H597.409H597.413H597.416H597.42H597.424H597.427H597.431H597.435H597.438H597.442H597.446H597.449H597.453H597.457H597.46H597.464H597.467H597.471H597.475H597.478H597.482H597.486H597.489H597.493H597.497H597.5H597.504H597.508H597.511H597.515H597.519H597.522H597.526H597.529H597.533H597.537H597.54H597.544H597.548H597.551H597.555H597.559H597.562H597.566H597.57H597.573H597.577H597.581H597.584H597.588H597.591H597.595H597.599H597.602H597.606H597.61H597.613H597.617H597.621H597.624H597.628H597.632H597.635H597.639H597.643H597.646H597.65H597.654H597.657H597.661H597.664H597.668H597.672H597.675H597.679H597.683H597.686H597.69H597.694H597.697H597.701H597.705H597.708H597.712H597.716H597.719H597.723H597.726H597.73H597.734H597.737H597.741H597.745H597.748H597.752H597.756H597.759H597.763H597.767H597.77H597.774H597.778H597.781H597.785H597.789H597.792H597.796H597.799H597.803H597.807H597.81H597.814H597.818H597.821H597.825H597.829H597.832H597.836H597.84H597.843H597.847H597.851H597.854H597.858H597.861H597.865H597.869H597.872H597.876H597.88H597.883H597.887H597.891H597.894H597.898H597.902H597.905H597.909H597.913H597.916H597.92H597.924H597.927H597.931H597.934H597.938H597.942H597.945H597.949H597.953H597.956H597.96H597.964H597.967H597.971H597.975H597.978H597.982H597.986H597.989H597.993H597.996H598H598.004H598.007H598.011H598.015H598.018H598.022H598.026H598.029H598.033H598.037H598.04H598.044H598.048H598.051H598.055H598.058H598.062H598.066H598.069H598.073H598.077H598.08H598.084H598.088H598.091H598.095H598.099H598.102H598.106H598.11H598.113H598.117H598.121H598.124H598.128H598.131H598.135H598.139H598.142H598.146H598.15H598.153H598.157H598.161H598.164H598.168H598.172H598.175H598.179H598.183H598.186H598.19H598.193H598.197H598.201H598.204H598.208H598.212H598.215H598.219H598.223H598.226H598.23H598.234H598.237H598.241H598.245H598.248H598.252H598.256H598.259H598.263H598.266H598.27H598.274H598.277H598.281H598.285H598.288H598.292H598.296H598.299H598.303H598.307H598.31H598.314H598.318H598.321H598.325H598.328H598.332H598.336H598.339H598.343H598.347H598.35H598.354H598.358H598.361H598.365H598.369H598.372H598.376H598.38H598.383H598.387H598.391H598.394H598.398H598.401H598.405H598.409H598.412H598.416H598.42H598.423H598.427H598.431H598.434H598.438H598.442H598.445H598.449H598.453H598.456H598.46H598.463H598.467H598.471H598.474H598.478H598.482H598.485H598.489H598.493H598.496H598.5H598.504H598.507H598.511H598.515H598.518H598.522H598.526H598.529H598.533H598.536H598.54H598.544H598.547H598.551H598.555H598.558H598.562H598.566H598.569H598.573H598.577H598.58H598.584H598.588H598.591H598.595H598.598H598.602H598.606H598.609H598.613H598.617H598.62H598.624H598.628H598.631H598.635H598.639H598.642H598.646H598.65H598.653H598.657H598.66H598.664H598.668H598.671H598.675H598.679H598.682H598.686H598.69H598.693H598.697H598.701H598.704H598.708H598.712H598.715H598.719H598.723H598.726H598.73H598.733H598.737H598.741H598.744H598.748H598.752H598.755H598.759H598.763H598.766H598.77H598.774H598.777H598.781H598.785H598.788H599.707C604.418 567.976 608.971 568.772 613.126 570.332L606.394 592.219L606.394 592.221L604.993 596.806L604.974 596.868L604.963 596.931C604.849 597.602 604.506 598.184 604.003 598.678L603.983 598.697L603.965 598.717L599.936 603.129L599.644 603.416L599.624 603.436L599.606 603.456L596.959 606.36L596.959 606.36L596.952 606.368L594.397 609.235C596.654 604.181 598.425 598.835 599.608 593.343L603.809 575.315L604.01 574.455L603.181 574.15L600.696 573.235L597.9 572.167Z"
            stroke={stroke}
            strokeWidth="2"
            fill="transparent"
            className="keyOpacity"
          />
        </g>
        <g xmlns="http://www.w3.org/2000/svg" filter="url(#filterPathNeuron002)">
          <path
            d="M560.496 585.481C561.118 586.093 561.585 586.704 562.208 587.315C563.453 588.691 564.699 589.914 566.1 591.137L564.543 584.106L563.92 581.049L562.519 575.24L582.756 567.903C587.115 566.375 591.94 565.458 596.922 565.458H597.233C598.167 565.458 598.945 565.458 599.724 565.458C600.813 565.458 602.059 565.611 603.148 565.764L599.568 564.541L596.61 563.471L589.917 561.178L584.78 559.344C583.379 558.885 581.978 558.885 580.577 559.344L574.817 561.331L556.604 567.751L551 569.585C553.179 575.546 556.448 580.896 560.496 585.481Z"
            fill={color}
          />
          <path
            d="M552.305 570.21L556.915 568.701L556.926 568.698L556.936 568.694L575.143 562.276L575.149 562.274L580.895 560.292C582.087 559.903 583.264 559.903 584.456 560.29L589.58 562.12L589.58 562.12L589.593 562.124L596.278 564.414L596.408 564.461C591.488 564.522 586.732 565.45 582.425 566.96L582.425 566.96L582.415 566.963L562.179 574.3L561.337 574.605L561.547 575.475L562.944 581.266L563.563 584.305L563.565 584.313L563.567 584.322L564.426 588.202C563.927 587.7 563.438 587.184 562.949 586.644L562.93 586.622L562.909 586.602C562.625 586.323 562.373 586.042 562.098 585.733L562.09 585.724C561.83 585.431 561.547 585.114 561.222 584.793C557.485 580.553 554.428 575.65 552.305 570.21Z"
            stroke={stroke}
            strokeWidth="2"
            fill="transparent"
            className="keyOpacity"
          />
        </g>
        <g xmlns="http://www.w3.org/2000/svg" filter="url(#filterPathNeuron003)">
          <path
            d="M589.292 602.601L586.023 605.199L582.598 607.951L567.187 595.417C565.008 593.583 562.828 591.596 560.96 589.456C560.338 588.845 559.871 588.233 559.248 587.469C557.224 585.023 555.512 582.425 553.955 579.521L557.224 590.067L557.536 591.29L558.625 594.806L559.248 596.946C559.559 597.71 559.871 598.627 560.493 599.238C561.116 599.85 561.894 600.767 562.828 601.837C563.451 602.601 564.229 603.365 565.008 604.282C571.701 611.772 582.442 623.847 582.754 624C588.513 616.205 592.716 607.339 595.207 597.71L589.292 602.601Z"
            fill={color}
          />
          <path
            d="M589.914 603.384L589.922 603.378L589.929 603.372L593.382 600.516C590.981 608.462 587.369 615.835 582.644 622.45C582.343 622.126 581.969 621.717 581.531 621.235C580.378 619.967 578.799 618.212 577.019 616.225C574.722 613.662 572.094 610.718 569.619 607.945C568.26 606.423 566.948 604.953 565.762 603.625C565.381 603.178 565.002 602.766 564.654 602.388C564.634 602.367 564.614 602.346 564.595 602.325C564.223 601.92 563.893 601.56 563.604 601.205L563.593 601.192L563.582 601.179C563.427 601.002 563.275 600.827 563.126 600.655C562.397 599.817 561.741 599.062 561.194 598.525C560.809 598.147 560.586 597.592 560.295 596.868C560.262 596.786 560.229 596.702 560.194 596.617L559.586 594.526L559.583 594.518L559.581 594.51L558.498 591.019L558.193 589.821L558.187 589.796L558.179 589.771L557.136 586.404C557.567 586.979 558.013 587.545 558.475 588.104C558.575 588.226 558.672 588.346 558.768 588.465C559.24 589.051 559.684 589.6 560.232 590.142C562.143 592.326 564.356 594.341 566.543 596.182L566.55 596.188L566.556 596.193L581.967 608.727L582.594 609.237L583.224 608.73L586.645 605.982L586.649 605.979L589.914 603.384Z"
            stroke={stroke}
            strokeWidth="2"
            fill="transparent"
            className="keyOpacity"
          />
        </g>
      </g>
      <defs>
        <filter
          id="filterPathNeuron001"
          x="573.712"
          y="558.834"
          width="52.6428"
          height="72.759"
          filterUnits="userSpaceOnUse"
          colorInterpolationFilters="sRGB"
        >
          <feFlood floodOpacity="0" result="BackgroundImageFix" />
          <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha" />
          <feOffset dy="4" />
          <feGaussianBlur stdDeviation="6" />
          <feComposite in2="hardAlpha" operator="out" />
          <feColorMatrix type="matrix" values={colorMatrix} />
          <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_2568_245334" />
          <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_2568_245334" result="shape" />
        </filter>
        <filter
          id="filterPathNeuron002"
          x="539"
          y="551"
          width="76.1484"
          height="56.1366"
          filterUnits="userSpaceOnUse"
          colorInterpolationFilters="sRGB"
        >
          <feFlood floodOpacity="0" result="BackgroundImageFix" />
          <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha" />
          <feOffset dy="4" />
          <feGaussianBlur stdDeviation="6" />
          <feComposite in2="hardAlpha" operator="out" />
          <feColorMatrix type="matrix" values={colorMatrix} />
          <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_2568_245334" />
          <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_2568_245334" result="shape" />
        </filter>
        <filter
          id="filterPathNeuron003"
          x="541.955"
          y="571.521"
          width="65.2517"
          height="68.4792"
          filterUnits="userSpaceOnUse"
          colorInterpolationFilters="sRGB"
        >
          <feFlood floodOpacity="0" result="BackgroundImageFix" />
          <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha" />
          <feOffset dy="4" />
          <feGaussianBlur stdDeviation="6" />
          <feComposite in2="hardAlpha" operator="out" />
          <feColorMatrix type="matrix" values={colorMatrix} />
          <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_2568_245334" />
          <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_2568_245334" result="shape" />
        </filter>
      </defs>
    </g>
  );
};
export default Neuron;
